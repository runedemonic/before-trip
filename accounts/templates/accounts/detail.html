{% extends 'white.html' %}
{% load static %}
{% load django_bootstrap5 %}
{% block body %}
<style>
  a {
    text-decoration: none;
  }

  ul.list {
    list-style-type: none;
    margin: 0;
    padding: 0;
    border-bottom: 1px solid #ccc;
  }

  ul.list::after {
    content: '';
    display: block;
    clear: both;
  }

  .tab-button {
    display: block;
    padding: 10px 20px 10px 20px;
    float: left;
    margin-right: -1px;
    margin-bottom: -1px;
    color: grey;
    text-decoration: none;
    cursor: pointer;
  }

  .blue {
    border-top: 2px solid #0061FF;
    border-right: 1px solid #ccc;
    border-bottom: 1px solid white;
    border-left: 1px solid #ccc;
    color: black;
    margin-top: -2px;
  }

  .tab-content {
    display: none;
    padding: 10px;
  }

  .show {
    display: block;
  }

  .test {
    display: grid;
    grid-template-columns: 5fr 5fr;
    max-width: 550px;
    margin: 0 auto;
    gap: 20px;
  }

  .sections {
    margin-top: 20px;
  }

  .profile {
    max-width: 733px;
    height: auto;
    background-color: #0061FF;
    padding: 26px;
    margin: 0 auto;
  }

  @media (min-width: 1024px) {
    .test {
      display: grid;
      grid-template-columns: 5fr 5fr;
      max-width: 733px;
      margin: 0 auto;
      gap: 20px;
    }

    .profile {
      margin: 4rem auto 0;
    }

    .sections {
      margin-top: 72px;
    }
  }

  .fTLpft {
    max-width: 733px;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-wrap: nowrap;
    -ms-flex-wrap: nowrap;
    flex-wrap: nowrap;
    gap: 20px;
    margin: 0 auto 20px;
  }

  .fTLpft .activity-card-wrapper {
    position: relative;
    display: block;
    max-width: 337px;
    min-width: 222px;
    max-height: 155px;
    min-height: 155px;
    background: hsl(230, 25%, 100%);
    border-radius: 12px;
    padding: 30px;
    -webkit-box-flex: 1;
    -webkit-flex-grow: 1;
    -ms-flex-positive: 1;
    flex-grow: 1;
    -webkit-flex-basis: 30%;
    -ms-flex-preferred-size: 30%;
    flex-basis: 30%;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    text-align: left;
    -webkit-transition: -webkit-transform 0.15s ease, box-shadow 0.15s ease;
    -webkit-transition: transform 0.15s ease, box-shadow 0.15s ease;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
  }

  .fTLpft .activity-card-wrapper .card-top {
    position: relative;
    height: 56px;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    -ms-flex-pack: justify;
    justify-content: space-between;
  }

  .fTLpft .activity-card-wrapper .card-top .emoji-section {
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    -ms-flex-pack: center;
    justify-content: center;
    -webkit-align-items: center;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    width: 56px;
    height: 56px;
    background: hsl(230, 25%, 97%);
    border-radius: 12px;
  }

  .gMqSnH {
    display: inline-block;
    width: 32px;
    height: 32px;
    content: "hushed";
  }

  .bzpqmR {
    position: relative;
    display: inline-block;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    box-sizing: border-box;
  }

  .aNZmK {
    display: inline-block;
    padding: 3px 8px 2px 8px;
    border-radius: 6px;
    background: hsl(230, 25%, 100%);
    -webkit-transition: all 0.15s ease 0s;
    transition: all 0.15s ease 0s;
    color: hsl(230, 4%, 10%);
    font-size: 13px;
    line-height: 21px;
    font-weight: 500;
    min-width: 32px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    height: 25px;
    text-align: center;
  }

  .fTLpft .activity-card-wrapper .card-top .badge {
    height: 25px;
    background: hsl(230, 25%, 97%);
  }

  .fTLpft .activity-card-wrapper .card-bottom {
    position: relative;
    margin-top: 16px;
  }

  .fTLpft .activity-card-wrapper .card-bottom .card-info {
    display: block;
  }

  .fTLpft .activity-card-wrapper .card-bottom .card-info .main-info {
    display: block;
    font-weight: 600;
    font-size: 18px;
    line-height: 140%;
    margin-bottom: 2px;
    color: hsl(230, 4%, 10%);
    word-break: keep-all;
  }

  .fTLpft .activity-card-wrapper .card-bottom .card-info .sub-info {
    display: block;
    font-size: 14px;
    line-height: 150%;
    color: hsl(230, 4%, 50%);
    padding-right: 36px;
    word-break: keep-all;
  }

  .fTLpft .activity-card-wrapper .card-bottom .status-icon {
    position: absolute;
    bottom: 0;
    right: 0;
  }

  .fTLpft .activity-card-wrapper::after {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    content: '';
    border-radius: 12px;
    z-index: -1;
    box-shadow: 0px 14px 16px hsl(218deg 53% 10% / 12%);
  }

  .gMqSnH span img {
    max-width: 100%;
    max-height: 100%;
  }

  .fTLpft .activity-card-wrapper:hover:not(.__not-hover),
  .fTLpft .activity-card-wrapper:focus:not(.__not-hover) {
    box-shadow: 10px 20px 30px hsl(218deg 53% 10% / 6%);
    -webkit-transform: translate3d(0, -4px, 0);
    -ms-transform: translate3d(0, -4px, 0);
    transform: translate3d(0, -4px, 0);
  }
</style>

<article class="profile d-flex align-items-center">
  {% if user.profile_image %}
  <div class="text-center">
    <img src="{{ user.profile_image.url}}" class="profile-image-border" alt="{{ user.profile_image }}"
      style="object-fit: cover; border: 3px solid white; border-radius: 50%; width: 90px; height: 90px; margin-right: 1.5rem;">
  </div>
  {% endif %}
  <div class="text-start">
    <p style="font-size: 24px; font-weight: 700; color: rgba(255, 255, 255, 1)">{{ user.nick_name }}</p>
    <p style="font-size: 18px; font-weight: 400; color:rgba(255, 255, 255, 0.5);">{{user.date_joined|date:'Y년 m월 d일'}}
    </p>
    {% if request.user == user %}
    <a href="{% url 'accounts:update' %}"
      style="text-decoration: none; color: rgba(255, 255, 255, 0.6); margin-right: 6px; font-size: 14px;">편집</a>
    <a href=" {% url 'accounts:logout' %}"
      style='text-decoration:none; color: rgba(255, 255, 255, 0.6); font-size: 14px;'>로그아웃</a>
    {% endif %}
  </div>
</article>



<section class="sections" style="max-width: 800px; padding: 16px 15px 0; margin: 0 auto">
  <div style="max-width: 733px; margin: 0 auto; display: flex; white-space: nowrap; overflow-x: scroll;">
    <div class="fTLpft">
      <a href="" class="activity-card-wrapper">
        <div class="card-top">
          <div class="emoji-section"><i class="gMqSnH"><!----> <span><img src="{% static 'img/note.png' %}"
                  alt="hushed icon"></span></i> <!----></div>
          <div class="bzpqmR" style="">
            <div><span class="badge aNZmK">{{ articles.count }}</span></div> <!---->
          </div>
        </div>
        <div class="card-bottom">
          <div class="card-info"><span class="main-info">작성 게시글</span></div>
          <!-- <title id="check">check icon</title> -->
          <g fill-opacity="1">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z">
            </path>
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M17.0717 8.33725C17.4619 8.72813 17.4613 9.36129 17.0704 9.75146L11.1468 15.6642C10.7562 16.0541 10.1235 16.0538 9.73325 15.6635L6.92961 12.8599C6.53909 12.4694 6.53909 11.8362 6.92961 11.4457C7.32014 11.0552 7.9533 11.0552 8.34383 11.4457L10.441 13.5429L15.6575 8.33594C16.0484 7.94578 16.6816 7.94636 17.0717 8.33725Z">
            </path>
          </g>
          </svg> <!----></i>
        </div>
      </a>

      {% if request.user == user %}
      <a href="" class="activity-card-wrapper">
        <div class="card-top">
          <div class="emoji-section"><i class="gMqSnH"><!----> <span><img src="{% static 'img/speech.png' %}"
                  alt="hushed icon"></span></i> <!----></div>
          <div class="bzpqmR" style="">
            <div><span class="badge aNZmK">{{ articleComment.count }}</span></div> <!---->
          </div>
        </div>
        <div class="card-bottom">
          <div class="card-info"><span class="main-info">작성 댓글</span></div>
          <!-- <title id="check">check icon</title> -->
          <g fill-opacity="1">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z">
            </path>
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M17.0717 8.33725C17.4619 8.72813 17.4613 9.36129 17.0704 9.75146L11.1468 15.6642C10.7562 16.0541 10.1235 16.0538 9.73325 15.6635L6.92961 12.8599C6.53909 12.4694 6.53909 11.8362 6.92961 11.4457C7.32014 11.0552 7.9533 11.0552 8.34383 11.4457L10.441 13.5429L15.6575 8.33594C16.0484 7.94578 16.6816 7.94636 17.0717 8.33725Z">
            </path>
          </g>
          </svg> <!----></i>
        </div>
      </a>
      {% endif %}

      {% if request.user != user %}
      <a href="" class="activity-card-wrapper">
        <div class="card-top">
          <div class="emoji-section"><i class="gMqSnH"><!----> <span><img src="{% static 'img/speech.png' %}"
                  alt="hushed icon"></span></i> <!----></div>
          <div class="bzpqmR" style="">
            <div><span class="badge aNZmK">{{ advices.count }}</span></div> <!---->
          </div>
        </div>
        <div class="card-bottom">
          <div class="card-info"><span class="main-info">꿀팁</span></div>
          <!-- <title id="check">check icon</title> -->
          <g fill-opacity="1">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z">
            </path>
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M17.0717 8.33725C17.4619 8.72813 17.4613 9.36129 17.0704 9.75146L11.1468 15.6642C10.7562 16.0541 10.1235 16.0538 9.73325 15.6635L6.92961 12.8599C6.53909 12.4694 6.53909 11.8362 6.92961 11.4457C7.32014 11.0552 7.9533 11.0552 8.34383 11.4457L10.441 13.5429L15.6575 8.33594C16.0484 7.94578 16.6816 7.94636 17.0717 8.33725Z">
            </path>
          </g>
          </svg> <!----></i>
        </div>
      </a>
      {% endif %}

      <a href="" class="activity-card-wrapper">
        <div class="card-top">
          <div class="emoji-section"><i class="gMqSnH"><!----> <span><img src="{% static 'img/desktop.png' %}"
                  alt="hushed icon"></span></i> <!----></div>
          <div class="bzpqmR" style="">
            <div><span class="badge aNZmK">{{ likes_article.count }}</span></div> <!---->
          </div>
        </div>
        <div class="card-bottom">
          <div class="card-info"><span class="main-info">좋아요 게시글</span></div>
          <!-- <title id="check">check icon</title> -->
          <g fill-opacity="1">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z">
            </path>
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M17.0717 8.33725C17.4619 8.72813 17.4613 9.36129 17.0704 9.75146L11.1468 15.6642C10.7562 16.0541 10.1235 16.0538 9.73325 15.6635L6.92961 12.8599C6.53909 12.4694 6.53909 11.8362 6.92961 11.4457C7.32014 11.0552 7.9533 11.0552 8.34383 11.4457L10.441 13.5429L15.6575 8.33594C16.0484 7.94578 16.6816 7.94636 17.0717 8.33725Z">
            </path>
          </g>
          </svg> <!----></i>
        </div>
      </a>
    </div>
  </div>
</section>

<div class="main-container"
  style="background-color: white; border-radius: 12px; max-width: 733px; margin: 20px auto 0;">
  <ul class="list" style="font-size: 14px;">
    <li class="tab-button blue">작성 게시글</li>
    {% if request.user == user %}
    <li class="tab-button">작성 댓글</li>
    {% endif %}
    {% if request.user != user %}
    <li class="tab-button">꿀팀</li>
    {% endif %}
    <li class="tab-button">좋아요 게시글</li>
  </ul>

  <!-- 게시글 목록 -->
  <div class="tab-content show">
    <ul style="padding-top: 15px; padding: 10px;">
      {% for article in articles %}
      <div class="review-row">
        <div class="row">
          <div class="col-8" style="padding:5px">
            <a href="{% url 'communities:detail' article.country.country_code article.pk %}"
              style="text-decoration: none;">
              <p class="review-title mb-0">
                {{ article.title }}
              </p>
            </a>
            <!-- 닉네임|작성일 -->
            <p class="review-date">{{ article.user }}|{{ article.created_at }}</p>
            <div class="icons-wrapper">
              <div class="icons">
                <!-- 좋아요 -->
                <div class="icon">
                  <span class="material-icons md-18">
                    thumb_up_alt
                  </span>
                  <span>{{ article.like_users.count }}</span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-4 review-list">
            {% if article.image %}
            <div>
              <img class="review-img" src="{{ article.image.url }}" alt="">
            </div>
            {% endif %}
          </div>
        </div>
      </div>
      {% empty %}
      <span>작성한 게시물이 없습니다.</span>
      {% endfor %}
    </ul>
  </div>

  <!-- 댓글 목록 -->
  {% if request.user == user %}
  <div class="tab-content">
    <ul style="padding-top: 15px; padding: 10px;">
      {% for comment in user.articlecomment_set.all %}
      <div class="comments-row">
        <div class="row">
          <div class="col-8" style="padding:5px">
            <div>
              {{ comment.content }}
            </div>
            <!-- 작성일 -->
            <p class="review-date">{{ comment.created_at }}</p>
            <div style="display:flex; align-items: center;">
              <span class="base-badge" style="margin-right: 6px;">
                게시글
              </span>
              <a href="{% url 'communities:detail' comment.article.country.country_code comment.article.pk %}"
                style="text-decoration: none;">
                <p class="review-title mb-0" style="font-size: 14px;">
                  {{ comment.article.title }}
                </p>
              </a>
            </div>

            <div class="icons-wrapper">
              <div class="icons">
              </div>
            </div>
          </div>
        </div>
      </div>
      {% empty %}
      <span>작성한 댓글이 없습니다.</span>
      {% endfor %}
    </ul>
  </div>

  {% endif %}

  <!-- 꿀팁 목록 -->
  {% if request.user != user %}
  <div class="tab-content">
    <ul style="padding-top: 15px; padding: 10px;">
      {% for advice in advices %}
      <div class="review-row">
        <div class="row">
          <div class="col-8" style="padding:5px">
            <a href="{% url 'communities:detail' advice.country.country_code advice.pk %}"
              style="text-decoration: none;">
              <p class="review-title mb-0">
                {{ advice.title }}
              </p>
            </a>
            <!-- 닉네임|작성일 -->
            <p class="review-date">{{ advice.user }}|{{ advice.created_at }}</p>
            <div class="icons-wrapper">
              <div class="icons">
                <!-- 좋아요 -->
                <div class="icon">
                  <span class="material-icons md-18">
                    thumb_up_alt
                  </span>
                  <span>{{ advice.like_users.count }}</span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-4 review-list">
            {% if advice.image %}
            <div>
              <img class="review-img" src="{{ advice.image.url }}" alt="">
            </div>
            {% endif %}
          </div>
        </div>
      </div>
      {% empty %}
      <span>꿀팁 게시물이 없습니다.</span>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <!-- 좋아요 게시글 -->
  <div class="tab-content">
    <ul style="padding-top: 15px; padding: 10px;">
      {% for article in user.likes_article.all %}
      <div class="review-row">
        <div class="row">
          <div class="col-8" style="padding:5px">
            <a href="{% url 'communities:detail' article.country.country_code article.pk %}"
              style="text-decoration: none;">
              <p class="review-title mb-0">
                {{ article.title }}
              </p>
            </a>
            <!-- 닉네임|작성일 -->
            <p class="review-date">{{ article.user }}|{{ article.created_at }}</p>
            <div class="icons-wrapper">
              <div class="icons">
                <!-- 좋아요 -->
                <div class="icon">
                  <span class="material-icons md-18">
                    thumb_up_alt
                  </span>
                  <span>{{ article.like_users.count }}</span>
                </div>
              </div>
            </div>
          </div>
          <div class="col-4 review-list">
            {% if article.image %}
            <div>
              <img class="review-img" src="{{ article.image.url }}" alt="">
            </div>
            {% endif %}
          </div>
        </div>
      </div>
      {% empty %}
      <span>좋아요한 게시물이 없습니다.</span>
      {% endfor %}
    </ul>
  </div>
</div>

</section>



<script>
  const allBtn = document.querySelectorAll('.tab-button');
  const allContent = document.querySelectorAll('.tab-content');

  for (let i = 0; i < allBtn.length; i++) {
    allBtn[i].addEventListener('click', function () {
      for (let i = 0; i < allBtn.length; i++) {
        allBtn[i].classList.remove('blue');
      }

      for (let i = 0; i < allContent.length; i++) {
        allContent[i].classList.remove('show');
      }

      allBtn[i].classList.add('blue');
      allContent[i].classList.add('show');
    })
  }
</script>
{% endblock %}

{% if request.user == user %}
<a class="btn font-space" href="{% url 'accounts:update' %}">수정하기</a>
{% endif %}